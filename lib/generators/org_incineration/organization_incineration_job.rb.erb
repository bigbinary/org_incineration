class OrganizationIncinerationJob
  include Delayed::RecurringJob

  run_every 1.day
  run_at "00:30am"
  timezone "UTC"
  queue "default"

  def perform
    if ((organizations = Organization.incineratables)).any?
      organizations.each do |organization|
        OrgIncineration::Incinerator.new(organization).run!
      end
    end
  end
end
